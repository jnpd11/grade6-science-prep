---
import '../styles/tailwind.css';

export interface Props {
  title: string;
  description?: string;
}

const { title, description } = Astro.props;
const desc = description ?? '六年级下册（科教版）科学预习资料：每课预习卡、趣味拓展、练一练与可打印版本。';
---

<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content={desc} />
    <link rel="icon" href="/favicon.ico" />

    <!-- FontAwesome 6 (free) -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
      integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />

    <title>{title}</title>
    <style>
      :root{
        --fontScale: 1.05;
        --radius: 18px;
      }

      /* Eye-friendly default: LIGHT */
      :root[data-theme='light']{
        --bg1:#f7fbff;
        --bg2:#f2f7f2;
        --panel: rgba(255,255,255,.78);
        --panel2: rgba(255,255,255,.6);
        --text:#0f172a;
        --muted: rgba(15,23,42,.72);
        --muted2: rgba(15,23,42,.58);
        --brand:#2563eb;
        --brand2:#22c55e;
        --brand3:#06b6d4;
        --border:rgba(15,23,42,.12);
        --shadow: 0 18px 60px rgba(2,6,23,.10);
      }

      /* Optional: dark mode */
      :root[data-theme='dark']{
        --bg1:#070a14;
        --bg2:#0b1224;
        --panel: rgba(255,255,255,.06);
        --panel2: rgba(255,255,255,.04);
        --text:#eef2ff;
        --muted: rgba(238,242,255,.76);
        --muted2: rgba(238,242,255,.6);
        --brand:#7c5cff;
        --brand2:#22c55e;
        --brand3:#06b6d4;
        --border:rgba(255,255,255,.12);
        --shadow: 0 18px 60px rgba(0,0,0,.35);
      }

      *{box-sizing:border-box}
      html{scroll-behavior:smooth}
      body{
        margin:0;
        font-family:ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"PingFang SC","Hiragino Sans GB","Microsoft YaHei",Arial;
        background:
          radial-gradient(1100px 520px at 10% -10%, color-mix(in srgb, var(--brand) 32%, transparent), transparent 60%),
          radial-gradient(900px 520px at 90% 0%, color-mix(in srgb, var(--brand3) 18%, transparent), transparent 55%),
          radial-gradient(900px 520px at 60% 120%, color-mix(in srgb, var(--brand2) 14%, transparent), transparent 55%),
          linear-gradient(180deg, var(--bg1), var(--bg2));
        color:var(--text);
      }
      a{color:inherit;text-decoration:none}
      .container{max-width:980px;margin:0 auto;padding:20px}
      header{display:flex;align-items:center;justify-content:space-between;gap:16px;margin-bottom:14px}
      .logo{display:flex;align-items:center;gap:12px}
      .logoTitle{font-weight:800; letter-spacing:.2px}
      .badge{display:inline-flex;align-items:center;gap:8px;padding:6px 10px;border:1px solid var(--border);border-radius:999px;background:rgba(0,0,0,.22);color:var(--muted2);font-size:12px}
      .brandDot{width:10px;height:10px;border-radius:50%;background:linear-gradient(135deg,var(--brand),var(--brand3))}
      nav{display:flex;gap:10px;flex-wrap:wrap}
      nav a{padding:8px 10px;border:1px solid transparent;border-radius:12px;color:var(--muted2)}
      nav a:hover{border-color:var(--border);background:rgba(0,0,0,.18);color:var(--text)}

      .hero{
        padding:18px;
        border:1px solid var(--border);
        border-radius: var(--radius);
        background: linear-gradient(180deg, var(--panel), var(--panel2));
        box-shadow: var(--shadow);
        backdrop-filter: blur(10px);
      }
      h1{margin:0 0 10px;font-size:calc(28px * var(--fontScale));letter-spacing:.2px;line-height:1.15}
      h2{letter-spacing:.1px}
      .sub{margin:0;color:var(--muted);line-height:1.85;font-size:calc(15px * var(--fontScale))}
      .grid{display:grid;grid-template-columns:repeat(12,1fr);gap:14px;margin-top:16px}
      .card{grid-column: span 6; padding:14px;border:1px solid var(--border);border-radius:16px;background:color-mix(in srgb, var(--panel) 70%, transparent)}
      .card h2{margin:0 0 8px;font-size:16px}
      .card p{margin:0;color:var(--muted);line-height:1.7}
      .card small{color:rgba(238,242,255,.7)}

      .btn{
        position:relative;
        overflow:hidden;
        display:inline-flex;align-items:center;justify-content:center;gap:8px;
        padding:10px 12px;border-radius:14px;
        border:1px solid var(--border);
        background: linear-gradient(135deg, color-mix(in srgb, var(--brand) 22%, transparent), color-mix(in srgb, var(--brand3) 12%, transparent));
        transition: transform .18s ease, border-color .18s ease, background .18s ease;
        will-change: transform;
      }
      .btn:hover{border-color:color-mix(in srgb, var(--brand) 25%, var(--border)); transform: translateY(-1px)}
      .ripple::after{
        content:"";
        position:absolute;
        inset:0;
        opacity:0;
        background: radial-gradient(circle at var(--rx,50%) var(--ry,50%), rgba(255,255,255,.35), transparent 38%);
        transition: opacity .35s ease;
        pointer-events:none;
      }
      .ripple:active::after{opacity:1; transition: none;}

      .list{margin-top:14px;display:grid;gap:10px}
      .item{padding:12px 12px;border:1px solid var(--border);border-radius:16px;background:color-mix(in srgb, var(--panel) 66%, transparent); transition: transform .18s ease, background .18s ease, border-color .18s ease;}
      .item:hover{background:color-mix(in srgb, var(--panel) 82%, transparent); transform: translateY(-2px); border-color: color-mix(in srgb, var(--brand) 20%, var(--border));}
      .itemTitle{display:flex;gap:10px;align-items:baseline;justify-content:space-between}
      .itemTitle b{font-size:15px}
      .itemTitle span{color:rgba(238,242,255,.62);font-size:12px}
      .itemDesc{margin-top:6px;color:var(--muted);line-height:1.7}

      footer{margin-top:26px;padding-top:16px;border-top:1px solid var(--border);color:rgba(238,242,255,.62);font-size:12px;line-height:1.7}
      .k{display:inline-block;padding:2px 8px;border:1px solid var(--border);border-radius:999px;background:rgba(0,0,0,.18); color: rgba(238,242,255,.75)}

      .unitTag{display:inline-flex;align-items:center;gap:8px;padding:6px 10px;border-radius:999px;border:1px solid var(--border);background:rgba(0,0,0,.18);color:rgba(238,242,255,.7);font-size:12px}
      .unitTag i{width:8px;height:8px;border-radius:50%;background:linear-gradient(135deg,var(--brand2),var(--brand3));display:inline-block}

      .controls{display:flex; gap:8px; align-items:center; justify-content:flex-end}
      .ctrl{border:1px solid var(--border); background:color-mix(in srgb, var(--panel) 75%, transparent); border-radius:12px; padding:8px 10px; cursor:pointer; color:inherit}
      .ctrl:hover{background:color-mix(in srgb, var(--panel) 92%, transparent)}

      .unitHero{display:flex; gap:12px; align-items:center; justify-content:space-between; padding:12px 12px; border:1px solid var(--border); border-radius:16px; background: linear-gradient(135deg, color-mix(in srgb, var(--ua) 18%, var(--panel)), color-mix(in srgb, var(--ub) 14%, var(--panel2)));}
      .unitHeroLeft{display:flex; flex-direction:column; gap:6px}
      .unitHeroBadge{display:inline-flex; align-items:center; gap:8px; padding:6px 10px; border-radius:999px; border:1px solid var(--border); background:color-mix(in srgb, var(--panel) 75%, transparent)}
      .unitHeroBadge b{font-size:13px}
      .unitHeroText{color:var(--muted); font-size:calc(14px * var(--fontScale)); line-height:1.7}
      .unitHeroArt{width:160px; height:auto; opacity:.95}

      @media (max-width: 720px){
        .card{grid-column: span 12}
        h1{font-size:calc(24px * var(--fontScale))}
        .unitHeroArt{display:none}
      }
      /* Scroll reveal */
      .reveal{opacity:0; transform: translateY(10px); filter: blur(2px)}
      .reveal.is-in{opacity:1; transform:none; filter:none; transition: opacity .6s ease, transform .6s ease, filter .6s ease}

      /* Skeleton */
      .skeleton{position:relative; overflow:hidden; background:color-mix(in srgb, var(--panel) 70%, transparent); border:1px solid var(--border); border-radius:16px}
      .skeleton::before{content:""; position:absolute; inset:0; transform: translateX(-60%); background: linear-gradient(90deg, transparent, rgba(255,255,255,.45), transparent); animation: shimmer 1.1s infinite; opacity:.6}
      @keyframes shimmer{0%{transform:translateX(-60%)} 100%{transform:translateX(60%)}}

      @media print{
        body{background:#fff;color:#000}
        header, nav, footer, .no-print{display:none !important}
        .container{max-width:none;padding:0}
        .hero,.card,.item{border-color:#ddd;background:#fff;box-shadow:none}
      }
    </style>
  </head>
  <body>
    <div class="container">
      <header>
        <div class="logo">
          <div class="brandDot" aria-hidden="true"></div>
          <div>
            <div class="logoTitle">六年级下 · 科学预习</div>
            <div class="badge"><span class="brandDot" style="width:8px;height:8px"></span> 教科版 · 护眼阅读 · 支持打印 · 可互动</div>
          </div>
        </div>
        <div style="display:flex; gap:10px; align-items:center">
          <nav class="no-print">
            <a href="/">首页</a>
            <a href="/lessons">目录</a>
            <a href="/about">说明</a>
          </nav>
          <slot name="controls" />
        </div>
      </header>

      <slot />

      <footer>
        <div>提示：本网站内容用于预习与拓展，课堂实验请在老师指导下进行。若你想把“每课内容”批量自动生成，可用 <span class="k">DeepSeek API</span> 跑本项目自带的生成脚本（不会在网页端暴露 Key）。</div>
      </footer>
    </div>
  </body>
</html>
